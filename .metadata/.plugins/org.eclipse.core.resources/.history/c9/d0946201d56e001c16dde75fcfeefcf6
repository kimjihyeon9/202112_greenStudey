package Address;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Scanner;

class Address {
	private static File file = new File("F:\\JH\\address.dat");
	private static FileInputStream fis;
	private static FileOutputStream fos;
	private static ObjectInputStream ois;
	private static ObjectOutputStream oos;
	private static ArrayList<Address> aList = new ArrayList<>();

	public static Scanner scan = new Scanner(System.in);

	String name;
	String phone;
	String addr;
	String email;

	Address(String name, String phone, String addr, String email) {
		this.name = name;
		this.phone = phone;
		this.addr = addr;
		this.email = email;
	}

	public Address() throws IOException, ClassNotFoundException {
		run();
	}

	public void run() throws IOException, ClassNotFoundException {
		System.out.println("1.등록 2.조회 3.수정 4.삭제 5.종료");
		System.out.print(">> ");
		int no = scan.nextInt();

		switch (no) {
		case 1:
			add();
			break;
		case 2:
			listAll();
			break;
		case 3:
			edit();
			break;
		case 4:
			delete();
			break;
		case 5:
			end();
			break;
		default:
			System.out.println("해당 번호는 없는 번호입니다.");
			break;
		}
		run();
	}

	public static String getLine() {
		InputStreamReader is = new InputStreamReader(System.in);
		BufferedReader b = new BufferedReader(is);

		try {
			return b.readLine();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;
	}

	private void add() throws IOException {
		System.out.println("-------------------------- 등록 --------------------------");

//		Address data = new Address();

		System.out.print("이름 입력 : ");
		name = getLine();

		System.out.print("전화번호 입력 : ");
		phone = getLine();

		System.out.print("주소 입력 : ");
		addr = getLine();

		System.out.print("이메일 입력 : ");
		email = getLine();

		aList.add(new Address(name, phone, addr, email));

		fos = new FileOutputStream(file);
		oos = new ObjectOutputStream(fos);
		ArrayList<Address> list = aList;
		oos.writeObject(list);

		System.out.println("입력완료!");
	}

	private void listAll() throws IOException, ClassNotFoundException {
		System.out.println("-------------------------- 조회 --------------------------");
		
		fis = new FileInputStream(file);
		ois = new ObjectInputStream(fis);
		ArrayList<Address> list = (ArrayList<Address>)ois.readObject();
		
		Iterator<Address> it = list.iterator();
		while(it.hasNext()) {
			System.out.println(it.next());
		}
		
		ois.close();
	}

	private void edit() {
		System.out.println("-------------------------- 수정 --------------------------");

	}

	private void delete() {
		System.out.println("-------------------------- 삭제 --------------------------");

	}

	private void end() {
		System.out.println("프로그램이 종료됩니다.");
		System.exit(0);
	}

}

public class AddressMain {

	public static void main(String[] args) throws ClassNotFoundException, IOException {
		new Address();
	}

}
